"use client";

import React, { useState, useEffect } from "react";
import "../app/styles/preloader.css";

interface PreloaderProps {
  onComplete?: () => void;
}

export default function Preloader({ onComplete }: PreloaderProps) {
  const [visible, setVisible] = useState(true);
  const [shouldShow, setShouldShow] = useState(true);

  useEffect(() => {
    console.log("Preloader: Starting animation");

    const timer = setTimeout(() => {
      console.log("Preloader: Hiding after animation");
      setVisible(false);
      setTimeout(() => {
        setShouldShow(false);
        onComplete?.(); // Call the completion callback
      }, 900);
    }, 5000);

    console.log("isVisible:", visible);
    return () => clearTimeout(timer);
  }, [onComplete, visible]);

  if (!shouldShow) return null;

  return (
    <div
      className={`preloader-container fixed inset-0 z-[999999] bg-black transition-opacity duration-500 ${
        visible ? "opacity-100" : "opacity-0"
      }`}
    >
      <div className="anime">
        <div className="load">
          <div className="logo-name">
            <svg
              height="100%"
              fill="none"
              xmlnsXlink="http://www.w3.org/1999/xlink"
              xmlns="http://www.w3.org/2000/svg"
              xmlSpace="preserve"
              width="100%"
              version="1.1"
              // viewBox="-10 -3 1310 230"
              viewBox="0 65 1310 265"
              id="lo"
            >
              <g id="roar">
                <path
                  d="M159.6 202.28C158.88 232.04 135.12 257 105.12 257H8.64C11.28 255.56 13.2 254.12 15.12 251.72C19.2 247.16 21.84 243.56 21.84 237.32L22.08 98.84C22.08 94.04 21.36 90.92 19.2 86.6C17.04 81.56 14.16 78.2 10.32 75.32H97.44C134.64 75.32 148.08 97.88 149.52 118.76C150.72 136.52 136.32 149.24 120.24 154.04C144.48 160.28 160.08 176.12 159.6 202.28ZM98.4 123.32C98.16 110.12 90 98.84 78.48 101.48L72.72 103.16V145.88L78.48 146.36C90.48 147.32 98.4 134.6 98.4 123.32ZM109.92 200.12C108.96 180.92 102.24 169.88 82.8 169.88H72.96V227.72L76.8 229.88C81.6 232.76 111.6 233.24 109.92 200.12Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-one"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M312.24 215L300.72 257H177.36C180.24 255.56 181.92 254.84 184.08 252.44C189.36 246.68 190.56 240.92 190.56 233.48V95.96C190.56 95.24 189.36 87.8 186.96 84.2C184.08 80.6 181.92 77.72 178.08 75.32H281.04C282.48 75.32 283.68 75.56 285.12 75.08C286.32 74.84 287.04 74.6 288 73.88V116.12C286.32 112.28 284.64 110.36 281.28 107.96C277.2 105.08 270.72 103.64 269.04 103.64H241.68V148.04H268.08C270.72 148.04 272.64 148.28 275.28 147.56C276.48 147.08 277.68 146.6 278.88 146.12V187.4C277.44 183.32 275.52 180.92 271.92 178.52C267.84 175.64 261.36 175.16 259.68 175.16H241.44V227.24C249.36 230.36 265.2 232.76 277.2 231.56C299.04 228.92 300.96 225.08 312.24 215Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-two"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M499.8 257L477.48 256.76C468.6 256.76 451.08 261.56 439.32 255.56C430.44 251 424.68 238.76 423.24 235.88L393.48 179.96V226.76C393.48 234.68 393 240.44 396.36 247.16C398.52 251.96 401.16 254.36 405.48 257.24H329.64C331.56 255.8 333 255.08 334.68 253.4C340.68 247.88 342.84 241.88 342.84 233.72L342.6 95.48C342.6 94.76 339.96 84.2 337.32 80.6C335.4 78.2 333.96 77 331.32 75.32H419.4C458.76 75.32 473.88 100.52 473.64 126.2C472.92 155 443.88 167 442.68 167.48L440.52 168.44L445.08 175.88C463.32 205.16 468.12 216.92 480.6 235.4C486.84 244.28 491.88 249.56 499.8 257ZM422.76 133.16C423.24 116.84 415.8 103.64 400.92 103.64H393.48V165.32C405.24 164.36 422.04 152.36 422.76 133.16Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-three"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M699.28 75.32C695.68 78.92 693.52 82.52 691.12 87.08C688.24 92.6 687.28 96.44 687.28 102.68L687.04 264.2C675.28 261.8 668.08 259.64 657.52 253.88C639.28 244.28 630.88 236.36 625.12 228.68L562 143.96V228.68C562 236.6 563.2 241.88 567.52 248.6C569.68 252.2 571.6 254.12 574.72 257H520C523.12 254.12 524.8 252.2 526.96 248.6C530.56 242.6 532.48 236.36 532.48 228.44V113C532.48 104.36 532 98.84 528.4 91.16C525.04 84.44 518.32 76.52 516.64 75.32H574L658.24 188.12V102.44C658.24 96.44 656.8 92.84 654.4 87.56C651.76 82.76 650.08 78.92 646.24 75.32H699.28Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-four"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M913.28 257H827.12C831.2 255.8 836.24 252.92 839.12 247.16C842 241.4 841.52 236.6 839.36 230.6L829.76 201.56H775.28L765.44 230.36C763.52 236.36 762.8 241.64 765.2 247.16C767.84 253.16 773.6 255.8 777.68 257H716.72C719.6 254.6 721.04 252.44 723.44 249.56C727.04 245.24 729.92 242.36 732.08 236.84L779.84 98.6C780.56 96.2 781.04 94.76 780.8 92.36C780.8 84.2 775.04 77.48 768.32 75.32H837.68L894.32 231.8C896.48 237.56 898.88 240.68 902.48 245.48C906.08 250.28 908.72 252.92 913.28 257ZM821.12 175.16L801.92 122.36L782.72 175.16H821.12Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-five"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M1099.8 257L1077.48 256.76C1068.6 256.76 1051.08 261.56 1039.32 255.56C1030.44 251 1024.68 238.76 1023.24 235.88L993.48 179.96V226.76C993.48 234.68 993 240.44 996.36 247.16C998.52 251.96 1001.16 254.36 1005.48 257.24H929.64C931.56 255.8 933 255.08 934.68 253.4C940.68 247.88 942.84 241.88 942.84 233.72L942.6 95.48C942.6 94.76 939.96 84.2 937.32 80.6C935.4 78.2 933.96 77 931.32 75.32H1019.4C1058.76 75.32 1073.88 100.52 1073.64 126.2C1072.92 155 1043.88 167 1042.68 167.48L1040.52 168.44L1045.08 175.88C1063.32 205.16 1068.12 216.92 1080.6 235.4C1086.84 244.28 1091.88 249.56 1099.8 257ZM1022.76 133.16C1023.24 116.84 1015.8 103.64 1000.92 103.64H993.48V165.32C1005.24 164.36 1022.04 152.36 1022.76 133.16Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-six"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
                <path
                  d="M1301.44 169.16C1300.48 220.76 1268.08 257 1202.56 257H1118.8C1121.68 255.8 1123.6 256.04 1125.76 253.64C1131.28 248.12 1132.72 242.6 1132.72 234.68V96.44C1132.72 91.4 1131.04 88.28 1128.16 83.96C1125.76 80.6 1123.84 77.72 1120.24 75.32H1210.24C1264.48 75.32 1302.16 118.52 1301.44 169.16ZM1247.92 168.68C1247.92 136.04 1234 98.12 1191.04 106.28L1182.64 107.72V227.24L1190.8 230.36C1231.6 245.72 1247.68 201.32 1247.92 168.68Z"
                  fill="none"
                  strokeLinecap="butt"
                  opacity="1"
                  strokeLinejoin="miter"
                  id="roar-seven"
                  stroke="#916ff8"
                  strokeWidth="5"
                />
              </g>
            </svg>
          </div>
        </div>

        {/* <LinearProgressWithLabel value={progress} /> */}
      </div>
    </div>
  );
}
